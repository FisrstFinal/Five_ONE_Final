<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="VidividiDAO">
	<select id="test" parameterType="String" resultType="TestDTO">
		select * from test1130
	</select>
	
	<!-- main video list 출력(인기순) -->
	<select id="video_list" parameterType="hashmap" resultType="VideoPlayDTO">		
		<![CDATA[
		   select * from
			(select v.video_title, video_cont, channel_name, video_view_cnt, video_regdate, video_code, channel_code, row_number() 
			   over(order by video_good desc) rnum from video_play v)
			   where rnum >= #{startNo} and rnum <= #{endNo}
		]]>	
					
	</select>
	
	<!-- main video list 출력(최신순) -->
	<select id="video_list_up" parameterType="hashmap" resultType="VideoPlayDTO">
		<![CDATA[
		   select * from
			(select v.video_title, video_cont, channel_name, video_view_cnt, video_regdate, video_code, channel_code, row_number() 
			   over(order by video_regdate desc) rnum from video_play v)
			   where rnum >= #{startNo} and rnum <= #{endNo}
		]]>	
	</select>
	
	
	<!-- main video list 소트(music) 정렬 -->
	<select id="video_list_sort_cook" parameterType="hashmap" resultType="VideoPlayDTO">		
		  <![CDATA[
			select * from
			(select v.video_title, video_cont, channel_name, video_view_cnt, video_regdate, video_code, channel_code, category_code, row_number() 
				over(order by video_good desc) rnum from video_play v where category_code = 200)
				where rnum >= #{startNo} and rnum <= #{endNo}
			]]>	
	</select>
	
<!-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++ 구분해요 ++++++++++++++++++++++++++++++++++++++++++++++ -->	

	<!-- 검색 video list 인기순 출력(제목) -->
	<select id="searchVideo" parameterType="hashmap" resultType="VideoPlayDTO">
		<![CDATA[
		   select * from
			(select v.*, row_number() 
			   over(order by video_good desc) rnum from video_play v
			   where ${field} like '%' || #{keyword} || '%' )
			   where rnum >= #{startNo} and rnum <= #{endNo}
		]]>	
	</select>
	

	<!-- 검색 video list 인기순 출력(채널명) -->
	<select id="ch_name" parameterType="hashmap" resultType="VideoPlayDTO">
		select * from video_play where ${field} 
		like '%' || #{keyword} || '%' order by video_good desc
	</select>
	
	<!-- 검색 video list 인기순 출력(해시) -->
	<select id="vi_hash" parameterType="hashmap" resultType="VideoPlayDTO">
		select * from video_play where ${field}
		like '%' || #{keyword} || '%' order by video_good desc
	</select>
	
	<!-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++ 구분해요 ++++++++++++++++++++++++++++++++++++++++++++++ -->
	
	<!-- 검색 video list 최신순 출력(제목) -->
	<select id="searchVideo_new" parameterType="hashmap" resultType="VideoPlayDTO">		
		<![CDATA[
		   select * from
			(select v.*, row_number() 
			   over(order by video_regdate desc) rnum from video_play v where  ${field} like '%' || #{keyword} || '%' )
			   where rnum >= #{startNo} and rnum <= #{endNo}
		]]>	
	</select>

	
</mapper>